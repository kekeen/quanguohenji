<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>紧急求助-发布紧急求助 - 全国痕迹检验网络实验室项目</title>
<meta name="renderer" content="webkit">

<link rel="stylesheet" href="../libs/ztree/css/zTreeStyle.css">
<link rel="stylesheet" href="../css/custom-bootstrap.css">
<link rel="stylesheet" href="../libs/icheck/skins/flat/_all.css">
<link rel="stylesheet" href="../libs/fonts/iconfont.css">
<link rel="stylesheet" href="../libs/datetimepicker-master/jquery.datetimepicker.css">
<link rel="stylesheet" href="../css/jquery.paging.css">
<link rel="stylesheet" href="../css/comment.css">
<link rel="stylesheet" href="../css/time_data.css">
<link rel="stylesheet" href="../css/helps.css">


<!--[if lt IE 9]>
  <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<body>
	<div class="header">
    <div class="logo">
        <a href="javascript:void(0)"><img src="../images/logo.png"></a>
    </div>
    <div class="nav-list">
        <ul class="clearfix">
            <li class=""><a href="javascript:void(0)">首页</a></li>
            <li class="active"><a href="紧急求助-我发出的求助.html">实战协同</a></li>
            <li class=""><a href="javascript:void(0)">实验室建设</a></li>
            <li class=""><a href="javascript:void(0)">标准规范</a></li>
            <li class=""><a href="javascript:void(0)">在线学习</a></li>
            <li class=""><a href="javascript:void(0)">科技创新</a></li>
            <li class=""><a href="javascript:void(0)">系统管理</a></li>
        </ul>
    </div>
    <div class="set">
        <a href="javascript:void(0)" class="set-search"><i></i></a>
        <a href="javascript:void(0)" class="set-login">登录</a>
        <a href="javascript:void(0)" class="set-register">注册</a>
    </div>
 </div>
	<div class="content">
		<div class="left-sidebar">
    <ul>
        
        <li class="active">
        	
        	<a href="紧急求助-我发出的求助.html" >
        	
                <i class="iconfont icon-line-circle"></i>
                人员协同
                
                <em><i class="iconfont icon-outline-chevron_right-px"></i></em>
                
            </a>
            
            <div class="left-side-kid">
                
                <a href="紧急求助-我发出的求助.html" class="active">
                    紧急求助
                </a>
                
                <a href="普通求助-我发出的预约.html" class="">
                    普通求助
                </a>
                
            </div>
            
        </li>
        
        <li class="">
        	
    		<a href="设备协同-我发起的申请.html" >
        	
                <i class="iconfont icon-line-date"></i>
                设备协同
                
            </a>
            
        </li>
        
        <li class="">
        	
    		<a href="技术交流-全部.html" >
        	
                <i class="iconfont icon-line-speaker"></i>
                技术交流
                
            </a>
            
        </li>
        
    </ul>
</div>
		<div class="content-right">
			<div class="links">
				<a href="index.html">首页</a> /
				<a href="###">实战协同</a> /
				<a href="###">人员协同</a> /
				<a href="###">紧急求助</a> /
				<a href="###" class="at">发布紧急求助</a>
			</div>
			<div class="right-content-box config whitebox">
				<div class="title">
					<span class="title-txt">发布紧急求助</span>
				</div>
				<ul class="config-list">
					
					<li class="config-lis">
						<label class="lbs">求助标题：</label>
						
						<input type="text" class="uninps" placeholder="请输入" />
						
					</li>
					
					<li class="config-lis">
						<label class="lbs">接收人：</label>
						
						<div class="radio-box">
							
							<label class="radio-lbs">
        								<input type="radio" name="receiver" value="全部用户" />
        								<span class="inblock ib-mid">全部用户</span>
        							</label>
							
							<label class="radio-lbs">
        								<input type="radio" name="receiver" value="专家组" />
        								<span class="inblock ib-mid">专家组</span>
        							</label>
							
							<label class="radio-lbs">
        								<input type="radio" name="receiver" value="指定用户" />
        								<span class="inblock ib-mid">指定用户</span>
        							</label>
							
						</div>
						<div class="user-box clearfix">
							<div class="tree-box pull-left">
								<div class="user-box-top">
									<div class="search-box">
	<input type="text" />
	<a href="javascript:void(0);" class="search-btn">
		<i class="iconfont icon-line-search"></i>
	</a>
</div>
								</div>
								<div class="ztree" id="tree"></div>
							</div>
							<div class="result-box pull-left">
								<div class="user-box-top">
									<label class="check-lbs">
        									<input type="checkbox" name="user" value="全选"/>
        									<span class="inblock ib-bottom">全选</span>
        								</label>
									<span class="pull-right">已选人员： <font class="checked-num">1</font>/50</span>
								</div>
								<ul class="result-list">
									<li>
										<span>黄多多</span>
										<a href="javascript:void(0);" class="pull-right user-del"><img src="../images/user_del.png" /></a>
									</li>
								</ul>
							</div>
						</div>
						
					</li>
					
					<li class="config-lis">
						<label class="lbs">专家组选择：</label>
						
						<div class="helps-btn-box">
							
							<button class="inps">现场勘查</button>
							
							<button class="inps">足迹检验</button>
							
							<button class="inps">工具痕迹检验</button>
							
							<button class="inps">锁紧检验</button>
							
							<button class="inps">痕迹检验</button>
							
							<button class="inps">分离体检验</button>
							
							<button class="inps">交通事故分析</button>
							
							<button class="inps">其他</button>
							
						</div>
						
					</li>
					
					<li class="config-lis">
						<label class="lbs">求助描述：</label>
						
						<input type="text" class="uninps" placeholder="请输入求助描述" />
						
					</li>
					
					<li class="config-lis">
						<label class="lbs">添加附件：</label>
						
						<div class="file-btn-box">
	<button class="btns ib-mid"><i class="iconfont icon-line-backup"></i>上传文件</button>
	<input type="file" class="hide" />
	<span class="file-txt inblock ib-mid">支持扩展名：rar. zip. doc. docx. pdf. jpg...</span>
</div>
<ul class="file-list">
	<li class="file-lis">
		现场痕迹文件.docx
		<a href="javascript:void(0);" class="del"><i class="iconfont icon-line-del"></i></a>
	</li>
</ul>
						
					</li>
					
					<li class="config-list">
						<div class="btn-box">
							<button class="btns">发布</button>
							<button class="btns cancel">取消</button>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	
<script src="../libs/jquery/jquery.min.js"></script>
<script src="../libs/ztree/jquery.ztree.all.js"></script>
<script src="../libs/bootstrap/dist/bootstrap.min.js"></script>
<script src="../libs/datetimepicker-master/build/jquery.datetimepicker.full.min.js"></script>
<script src="../libs/icheck/icheck.min.js"></script>
<script src="../js/jquery.paging.js"></script>
<script src="../js/global.js"></script>


	<script>
		ztree();

		function ztree() {
			$(".result-list").on('click', '.user-del', function() {
				var that = $(this),
					target = that.parent(),
					tree = $("#tree"),
					txt = that.siblings("span").text(),
					arr = zTreeObj.getCheckedNodes(),
					font = $(".result-box .checked-num"),
					num = parseInt(font.html());
				for(var i in arr) {
					if(txt == arr[i].name) {
						zTreeObj.checkNode(arr[i], false)
						target.remove();
						num--;
						if(num == 0) {
							zTreeObj.checkAllNodes(false);
						}
						font.html(num);
					}
				}
			});
			var zTreeObj,
				folder = "../images/folder.png",
				folder_open = "../images/folder-open.png",
				admin = "../images/admin.png",
				setting = {
					view: {
						showTitle: false
					},
					check: {
						enable: true
					},
					callback: {
						onCheck: function(e, treeId, treeNode) {
							var flag = treeNode.checked,
								str = treeNode.name,
								target = $(e.currentTarget).parent('.tree-box').siblings('.result-box').find('.result-list'),
								lis = target.find('li'),
								font = $(".result-box .checked-num"),
								arr = zTreeObj.getCheckedNodes(true),
								num = 0;
							if(flag) {
								//选中
								if(treeNode.check_Child_State == -1) {
									//判断是否选中的是否为子节点
									if(lis.text().indexOf(str) == -1) {
										target.append('<li><span>' + str + '</span><a href="javascript:void(0);" class="pull-right user-del"><img src="../images/user_del.png"></a>');
									}
								} else {
									var child_arr = treeNode.children;
									for(var i in child_arr) {
										if(lis.text().indexOf(child_arr[i].name) == -1) {
											target.append('<li><span>' + child_arr[i].name + '</span><a href="javascript:void(0);" class="pull-right user-del"><img src="../images/user_del.png"></a>');
										}
									}
								}
							} else {
								//取消选中
								if(treeNode.check_Child_State == -1) {
									//判断是否选中的是否为子节点
									lis.each(function() {
										var that = $(this),
											txt = that.find('span').text(),
											index = that.index();
										if(txt == str) {
											lis.eq(index).remove();
										}
									})
								} else {
									lis.remove();
								}
							}
							for(var i in arr) {
								if(arr[i].check_Child_State == -1)
									//判断是否选中的是否为子节点
									num++;
							}
							font.html(num);
						}
					}
				},
				child = [{
					name: "黄多多",
					open: true,
					icon: admin,
					checked: true
				}, {
					name: "陈依依",
					open: true,
					icon: admin
				}, {
					name: "陈依依1",
					open: true,
					icon: admin
				}, {
					name: "陈依依2",
					open: true,
					icon: admin
				}]
			zNodes = [{
				name: "专家组",
				open: true,
				iconClose: folder,
				iconOpen: folder_open,
				children: child
			}];
			$(document).ready(function() {
				zTreeObj = $.fn.zTree.init($("#tree"), setting, zNodes);
			});
		}
	</script>
</body>

</html>